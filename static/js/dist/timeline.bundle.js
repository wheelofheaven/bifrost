(()=>{document.addEventListener("DOMContentLoaded",function(){console.log("=== TIMELINE SCRIPT LOADED ===");const E=document.getElementById("age-card"),X=document.getElementById("age-symbol"),K=document.getElementById("age-title"),F=document.getElementById("age-timespan"),U=document.getElementById("age-description"),V=document.getElementById("age-link"),v=document.getElementById("age-card-images"),S=document.getElementById("age-progress-segments"),D=document.querySelector(".earth-container"),u=document.getElementById("nav-prev"),f=document.getElementById("nav-next"),w=document.getElementById("age-selector-dropdown");let o=0,L=!1;const l=[{name:"In the beginning...",symbol:"\u2726",color:"yellow",start:"\u221223970",end:"\u221221810",event:"Before time began, in the vast expanse of the cosmos, the Elohim civilization flourished. Advanced beings who mastered science and creation, they would soon discover our world and begin the greatest experiment in galactic history.",link:"/timeline/in-the-beginning",images:["/images/ages/modern-urban-landscape.avif","/images/ages/saurian-experiments.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-mist.webp"},{name:"Age of Capricorn",symbol:"\u2651",color:"mauve",start:"\u221221810",end:"\u221219650",event:"Synthetic life engineering on the Elohim home planet with the inevitable escape of synthetic 'monster' lifeforms. Earth discovered, exploration. Known as the 1st day of Creation (Genesis)",link:"/timeline/age-of-capricorn",images:["/images/ages/spacecraft-in-orbit.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-mist.webp"},{name:"Age of Sagittarius",symbol:"\u2650",color:"blue",start:"\u221219650",end:"\u221217490",event:"Study and analysis of Earth's atmosphere and its constitution and the harmfulness of the sun light. Known as the 2nd day of Creation (Genesis)",link:"/timeline/age-of-sagittarius",images:["/images/ages/orbital-outpost.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp"},{name:"Age of Scorpio",symbol:"\u264F",color:"cyan",start:"\u221217490",end:"\u221215330",event:"Terraforming and first synthetic life engineering adapted to the new planet (Earth); creation of prokaryotes, fungi, plant life and most likely insects. Known as the 3rd day of Creation (Genesis)",link:"/timeline/age-of-scorpio",images:["/images/ages/genetic-research-lab.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-pangeae-arid.webp"},{name:"Age of Libra",symbol:"\u264E",color:"teal",start:"\u221215330",end:"\u221213170",event:"Astronomy, measure of time, adaptation of life to Earth environment. Engineering of fish and bird life, as well as dragons, known to us as dinosaurs. Known as the 4th day of Creation (Genesis)",link:"/timeline/age-of-libra",images:["/images/ages/fauna-and-flora.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-pangeae-green.webp"},{name:"Age of Virgo",symbol:"\u264D",color:"mint",start:"\u221213170",end:"\u221211010",event:"Engineering of all types of land animals, mammals, reptiles. Everything was done to keep things in balance/ecology. Known as the 5th day of Creation (Genesis)",link:"/timeline/age-of-virgo",images:["/images/ages/dinosaurs-on-plain.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-pangeae-green.webp"},{name:"Age of Leo",symbol:"\u264C",color:"green",start:"\u221211010",end:"\u22128850",event:"First Earthly humans engineered. Lived as primitive among the Elohim. Weren't allowed to learn about their cosmic origins. Known as the 6th day of Creation (Genesis)",link:"/timeline/age-of-leo",images:["/images/ages/genetic-research-lab.avif","/images/ages/saurian-experiments.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-pangeae-green.webp"},{name:"Age of Cancer",symbol:"\u264B",color:"yellow",start:"\u22128850",end:"\u22126690",event:"The Elohim rebel group known as the Serpent/Dragon was banished to remain on Earth after they taught the Earthlings about their cosmic origins. They conceived offsprings with the humans, creating the first hybrids. Known as the 7th day of Creation (Genesis) of Rest.",link:"/timeline/age-of-cancer",images:["/images/ages/blue-planet-surface.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-pangeae-green.webp"},{name:"Age of Gemini",symbol:"\u264A",color:"pink",start:"\u22126690",end:"\u22124530",event:"The Elohim government didn't like the events on Earth, so they were planning to destroy life on Earth. The banished faction among with Noah build a spaceship to escape the planet, known as Noah's Ark. When the flood-inducing weaponry hit Earth, life was preserved on the Ark in orbit around the planet. After the flood, Noah's Ark landed on Earth and reseeded Earth with the help of the Elohim survivors. Creation of a huge space rocket, the Tower of Babel. War in Heaven among the Elohim factions.",link:"/timeline/age-of-gemini",images:["/images/ages/above-the-clouds-structure.avif","/images/ages/orbital-outpost.avif"],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp"},{name:"Age of Taurus",symbol:"\u2649",color:"soft-pink",start:"\u22124530",end:"\u22122370",event:"Destruction of the center of progress such as Sodom and Gomorrah. The Serpentine Elohim faction lost and was pardoned, so they returned back to their home planet. The public opinion about life on Earth got favorable. Events of Abraham.",link:"/timeline/age-of-taurus",images:[],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp"},{name:"Age of Aries",symbol:"\u2648",color:"lavender",start:"\u22122370",end:"\u2212210",event:"Events of Moses and Exodus",earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp",link:"/timeline/age-of-aries",images:[]},{name:"Age of Pisces",symbol:"\u2653",color:"mauve",start:"\u2212210",end:"1945",event:"Jesus and his fishermen, multiplication of people, increase of demographics, independent development.",link:"/timeline/age-of-pisces",images:[],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp"},{name:"Age of Aquarius",symbol:"\u2652",color:"blue",start:"1945",end:"4110",event:"Revelation of our cosmic origins, the last prophet, the avoiding of the nuclear holocaust/destroying our civilization, Golden Age is awaiting, the return of our father in Heaven, our creators, the Elohim",link:"/timeline/age-of-aquarius",images:[],earth_texture:"https://assets.wheelofheaven.io/images/earth/earth-ocean-blue.webp"}];let B=null,_="A";function j(e){if(!e||e===B)return;const t=_==="A"?"B":"A",n=document.querySelector(`#earthTexture${t} image`),a=document.querySelector(`.earth-layer--${t.toLowerCase()}`),r=document.querySelector(`.earth-layer--${_.toLowerCase()}`);n&&a&&r&&(n.setAttribute("href",e),a.setAttribute("opacity","1"),r.setAttribute("opacity","0"),_=t,B=e,console.log("Earth texture cross-fade to:",e))}const J={yellow:"#fbf8cc",pink:"#fde4cf","soft-pink":"#ffcfd2",lavender:"#f1c0e8",mauve:"#cfbaf0",blue:"#a3c4f3",cyan:"#90dbf4",teal:"#8eecf5",mint:"#98f5e1",green:"#b9fbc0"},Q=864/432;function R(e=null){const t=document.getElementById("starmap-background"),n=document.getElementById("timeline-content");if(t&&n){const a=e!==null?e:o;if(!(window.innerWidth<=768)){const s=-(a*100);n.style.transform=`translateX(${s}vw)`;const m=window.innerHeight*Q/13,i=window.innerWidth*.3-a*m;t.style.backgroundPosition=`${i}px center`}e===null&&console.log(`Age ${o+1}/${l.length}: Starmap position updated`)}}function c(e,t=!0){if(e<0||e>=l.length||L&&t)return;const n=l[e],a=J[n.color]||"#a3c4f3";t&&o!==e?(L=!0,E.style.opacity="0.7",setTimeout(()=>{N(n,a,e),E.style.opacity="1",setTimeout(()=>{L=!1},150)},100)):N(n,a,e),o=e,g=0,p=0,A=0,R()}function N(e,t,n){e.earth_texture&&j(e.earth_texture),X.textContent=e.symbol,K.textContent=e.name,U.textContent=e.event,V.href=e.link;const a=Math.abs(parseInt(e.start.replace("\u2212",""))),r=Math.abs(parseInt(e.end.replace("\u2212",""))),s=e.start.startsWith("\u2212")?" BC":" AD",d=e.end.startsWith("\u2212")?" BC":" AD";F.textContent=`${a.toLocaleString()}${s} \u2192 ${r.toLocaleString()}${d}`,E.style.setProperty("--age-color",t);const m=E.querySelector(".age-card__link");if(m&&(m.style.background=`linear-gradient(135deg, ${t}, ${t}99)`),S){const y=S.querySelectorAll(".age-progress__segment");y.forEach((i,ae)=>{ae===n?(i.classList.add("age-progress__segment--active"),i.style.setProperty("--age-color",t),i.style.background=t,i.style.boxShadow=`0 0 16px ${t}, inset 0 1px 0 rgba(255, 255, 255, 0.3)`):(i.classList.remove("age-progress__segment--active"),i.style.background="",i.style.boxShadow="")}),console.log(`Progress bar updated: ${y.length} segments, active: ${n}`)}else console.log("Progress segments element not found");v&&e.images&&e.images.length>0?(v.innerHTML="",e.images.forEach(y=>{const i=document.createElement("img");i.src=y,i.alt=`${e.name} illustration`,i.className="age-card__image",i.onerror=function(){this.style.display="none"},v.appendChild(i)})):v&&(v.innerHTML=""),u.disabled=n===0,f.disabled=n===l.length-1}function W(e){e.preventDefault(),e.stopPropagation(),console.log("PREV button triggered via",e.type),o>0&&c(o-1,!0)}function H(e){e.preventDefault(),e.stopPropagation(),console.log("NEXT button triggered via",e.type),o<l.length-1&&c(o+1,!0)}u&&(u.addEventListener("click",W),u.addEventListener("touchend",W)),f&&(f.addEventListener("click",H),f.addEventListener("touchend",H));const Y=document.querySelector(".age-progress");Y&&S&&w&&(Y.addEventListener("click",e=>{if(e.target.classList.contains("age-progress__segment")){const t=parseInt(e.target.dataset.segment);!isNaN(t)&&t<l.length&&(c(t,!0),w.classList.remove("age-selector__dropdown--open"))}else w.classList.toggle("age-selector__dropdown--open")}),document.addEventListener("click",e=>{e.target.closest(".age-progress")||w.classList.remove("age-selector__dropdown--open")}),document.querySelectorAll(".age-selector__option").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=parseInt(e.dataset.ageIndex);c(n,!0),w.classList.remove("age-selector__dropdown--open")})})),document.addEventListener("keydown",e=>{e.key==="ArrowLeft"||e.key==="ArrowUp"?(e.preventDefault(),u&&u.click()):(e.key==="ArrowRight"||e.key==="ArrowDown")&&(e.preventDefault(),f&&f.click())}),D&&(D.style.transform="translate(-50%, -50%)");let C=!1,h=!1,p=0;const G=15;let g=0;const k=5;let A=0;const Z=200;function T(e){if(!L&&!h){e.preventDefault();const t=Date.now();if(o===l.length-1&&e.deltaY>0){p++,console.log(`Age of Aquarius resistance: ${p}/${G}`),p>=G&&(C=!0,h=!0,p=0,console.log("Enabling vertical scroll from Age of Aquarius!"),P());return}if(t-A<Z){console.log("Scroll throttled - too fast!");return}A=t,e.deltaY>0?(g++,console.log(`Forward scroll: ${g}/${k}`),g>=k&&(o<l.length-1&&c(o+1,!0),g=0)):(g--,console.log(`Backward scroll: ${Math.abs(g)}/${k}`),g<=-k&&(o>0&&c(o-1,!0),g=0))}}function I(){h?window.scrollY<=10&&(h=!1,C=!1,p=0,g=0,A=0,b=0,$(),console.log("Returned to timeline - horizontal scrolling re-enabled")):window.scrollY>0&&window.scrollTo(0,0)}function ee(){l.forEach((e,t)=>{let n;t===0?n="world-age-images-beginning":n=`world-age-images-${t}`;const a=document.getElementById(n);a&&e.images&&e.images.length>0&&(a.innerHTML="",e.images.forEach(r=>{const s=document.createElement("img");s.src=r,s.alt=`${e.name} illustration`,s.className="world-age-card__image",s.onerror=function(){this.style.display="none"},a.appendChild(s)}))})}function $(){document.documentElement.classList.add("timeline-scroll-locked")}function P(){document.documentElement.classList.remove("timeline-scroll-locked")}function te(){$(),c(0,!1),ee(),console.log("Timeline section initialized: horizontal scroll through 13 ages (including 'In the beginning...'), then reveal World Ages section")}let q=0,O=0,b=0;const z=5;function x(e){window.innerWidth<=768&&(q=e.touches[0].clientX,O=e.touches[0].clientY)}function M(e){if(!(window.innerWidth<=768)||h)return;const n=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,r=q-n,s=O-a,d=50,m=Math.abs(r)>Math.abs(s);m&&Math.abs(r)>d?r>0&&o<l.length-1?c(o+1,!0):r<0&&o>0&&c(o-1,!0):!m&&Math.abs(s)>d&&(s>0?o<l.length-1?c(o+1,!0):(b++,console.log(`Mobile resistance: ${b}/${z}`),b>=z&&(h=!0,C=!0,b=0,P(),console.log("Mobile: transitioning to vertical scroll"))):o>0&&c(o-1,!0))}function ne(){const e=window.innerWidth<=768;h||$(),e||R(),window.removeEventListener("wheel",T),window.removeEventListener("scroll",I),document.removeEventListener("touchstart",x),document.removeEventListener("touchend",M),e&&(document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchend",M,{passive:!0})),window.addEventListener("wheel",T,{passive:!1}),window.addEventListener("scroll",I,{passive:!0})}const oe=window.innerWidth<=768;window.addEventListener("wheel",T,{passive:!1}),window.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",ne,{passive:!0}),oe&&(document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchend",M,{passive:!0})),document.addEventListener("click",function(e){const t=e.target,n=t.tagName,a=t.className,r=t.id;console.log(`[DEBUG CLICK] target: <${n}> id="${r}" class="${a}"`);const s=document.elementsFromPoint(e.clientX,e.clientY);console.log("[DEBUG CLICK] elements at point:",s.map(function(d){return d.tagName+(d.id?"#"+d.id:"")+(d.className?"."+String(d.className).split(" ").join("."):"")}))},!0),te(),console.log("=== TIMELINE COMPLETE: Horizontal scroll through constellations with vertical transition ===")});})();
